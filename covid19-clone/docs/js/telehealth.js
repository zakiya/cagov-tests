class e{constructor(e){let t={label:"Unknown data",value:"Unknown data"};"string"==typeof e?t={label:e,value:e}:Array.isArray(e)?t={label:e[0],value:e[1]}:"object"==typeof e&&("label"in e||"value"in e)&&(t=e),this.label=t.label||t.value,this.value=t.value,"userData"in t&&(this.userData=t.userData)}get length(){return this.label.length}toString(){return`${this.label}`}valueOf(){return this.toString()}}class t{constructor(e,s){t.all=[];const i=this;t.count=(t.count||0)+1,this.count=t.count,this.isOpened=!1,this.input=t.query(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-owns",`awesomplete_list_${this.count}`),this.input.setAttribute("role","combobox"),this.options=s||{},this.configure({minChars:2,maxItems:10,autoFirst:!1,data:t.DATA,filter:t.FILTER_CONTAINS,sort:!1!==s.sort&&t.SORT_BYLENGTH,container:t.CONTAINER,item:t.ITEM,replace:t.REPLACE,tabSelect:!1},s),this.index=-1,this.container=this.container(e),this.ul=t.create("ul",{hidden:"hidden",role:"listbox",id:`awesomplete_list_${this.count}`,inside:this.container}),this.status=t.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!==this.minChars?`Type ${this.minChars} or more characters for results.`:"Begin typing for results."}),this.events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown(e){const t=e.keyCode;i.opened&&(13===t&&i.selected?(e.preventDefault(),e.stopImmediatePropagation(),i.select()):9===t&&i.selected&&i.tabSelect?i.select():27===t?i.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),i[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown(e){e.preventDefault()},click(e){let t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),i.select(t,e.target))}}}},t.bind(this.input,this.events.input),t.bind(this.input.form,this.events.form),t.bind(this.ul,this.events.ul),this.input.hasAttribute("list")?(this.list=`#${this.input.getAttribute("list")}`,this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||s.list||[],t.all.push(this)}configure(e,t){Object.keys(e).forEach((s=>{const i=e[s],n=this.input.getAttribute(`data-${s.toLowerCase()}`);this[s]="number"==typeof i?parseInt(n,10):!1===i?null!==n:i instanceof Function?null:n,this[s]||0===this[s]||(this[s]=s in t?t[s]:i)}))}set list(e){if(Array.isArray(e))this.dataList=e;else if("string"==typeof e&&e.indexOf(",")>-1)this.dataList=e.split(/\s*,\s*/);else{const s=t.query(e);if(s&&s.children){const e=[],t=t=>{if(!t.disabled){const s=t.textContent.trim(),i=t.value||s,n=t.label||s;""!==i&&e.push({label:n,value:i})}};Array.prototype.slice.apply(s.children).forEach(t),this.dataList=e}}document.activeElement===this.input&&this.evaluate()}get list(){return this.dataList}get selected(){return this.index>-1}get opened(){return this.isOpened}close(e){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),t.fire(this.input,"awesomplete-close",e||{}))}open(){this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),t.fire(this.input,"awesomplete-open")}destroy(){if(t.unbind(this.input,this.events.input),t.unbind(this.input.form,this.events.form),!this.options.container){const{parentNode:e}=this.container;e.insertBefore(this.input,this.container),e.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");const e=t.all.indexOf(this);-1!==e&&t.all.splice(e,1)}next(){const e=this.ul.children.length;let t=0;t=this.index<e-1?this.index+1:e?0:-1,this.goto(t)}previous(){const e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)}goto(e){const s=this.ul.children;if(this.selected&&s[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&s.length>0){s[e].setAttribute("aria-selected","true"),this.status.textContent=`${s[e].textContent}, list item ${e+1} of ${s.length}`,this.input.setAttribute("aria-activedescendant",`${this.ul.id}_item_${this.index}`),this.ul.scrollTop=s[e].offsetTop-this.ul.clientHeight+s[e].clientHeight;const i=this.suggestions[this.index];t.fire(this.input,"awesomplete-highlight",{selectedIndex:this.index,selectedText:`${i}`,selectedSuggestion:i})}}select(e,s){let i=e;if(e?this.index=t.siblingIndex(e):i=this.ul.children[this.index],i){const e=this.index,n=this.suggestions[e];t.fire(this.input,"awesomplete-select",{selectedIndex:e,selectedText:`${n}`,selectedSuggestion:n,origin:s||i})&&(this.replace(n),this.close({reason:"select"}),t.fire(this.input,"awesomplete-selectcomplete",{selectedIndex:e,selectedText:`${n}`,selectedSuggestion:n}))}}evaluate(){const t=this,{value:s}=this.input;if(s.length>=this.minChars&&this.dataList&&this.dataList.length>0){this.index=-1,this.ul.innerHTML="";const i=i=>new e(t.data(i,s)),n=e=>t.filter(e,s);this.suggestions=this.dataList.map(i).filter(n),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems);const a=(e,i)=>{t.ul.appendChild(t.item(e,s,i))};this.suggestions.forEach(a),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=`${this.ul.children.length} results found`)}else this.close({reason:"nomatches"}),this.status.textContent="No results found"}static FILTER_CONTAINS(e,s){return RegExp(t.regExpEscape(s.trim()),"i").test(e)}static FILTER_STARTSWITH(e,s){return RegExp(`^${t.regExpEscape(s.trim())}`,"i").test(e)}static SORT_BYLENGTH(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1}static CONTAINER(e){return t.create("div",{className:"awesomplete",around:e})}static ITEM(e,s,i){const n=""===s.trim()?e:`${e}`.replace(RegExp(t.regExpEscape(s.trim()),"gi"),"<mark>$&</mark>");return t.create("li",{innerHTML:n,"aria-selected":"false",id:`awesomplete_list_${this.count}_item_${i}`})}static REPLACE(e){this.input.value=e.value||e.label}static DATA(e){return e}static query(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}static queryAll(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}static create(e,s){const i=document.createElement(e);return Object.keys(s).forEach((e=>{const n=s[e];if("inside"===e)t.query(n).appendChild(i);else if("around"===e){const e=t.query(n);e.parentNode.insertBefore(i,e),i.appendChild(e),null!=e.getAttribute("autofocus")&&e.focus()}else e in i?i[e]=n:i.setAttribute(e,n)})),i}static bind(e,t){if(e){const s=s=>{const i=t[s];s.split(/\s+/).forEach((t=>{e.addEventListener(t,i)}))};Object.keys(t).forEach(s)}}static unbind(e,t){if(e){const s=s=>{const i=t[s];s.split(/\s+/).forEach((t=>{e.removeEventListener(t,i)}))};Object.keys(t).forEach(s)}}static fire(e,t,s){const i=document.createEvent("HTMLEvents"),n=e=>{i[e]=s[e]};return i.initEvent(t,!0,!0),"object"==typeof s&&Object.keys(s).forEach(n),e.dispatchEvent(i)}static regExpEscape(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}static siblingIndex(e){let t=0,s=e;for(;s;)s=s.previousElementSibling,s&&(t+=1);return t}}class s extends window.HTMLElement{connectedCallback(){const e=this.dataset.searchApi;let s="Please enter your county or zip code",i="Find health plan",n="Results list";this.dataset.buttonLabel&&(i=this.dataset.buttonLabel),this.dataset.label&&(s=this.dataset.label),this.dataset.listLabel&&(n=this.dataset.listLabel);let a=function(e,t){return`<form class="form-inline form-inline-left js-cagov-lookup">\n  <div class="form-group">\n    <label for="location-query"\n      >${e}:</label\n    >\n    <div class="awesomplete">\n      <div class="awesomplete">\n        <input\n          aria-expanded="false"\n          aria-owns="awesomplete_list_1"\n          autocomplete="off"\n          class="city-search form-control"\n          data-list=""\n          data-multiple=""\n          id="location-query"\n          role="combobox"\n          type="text"\n        />\n        <span\n          class="visually-hidden"\n          role="status"\n          aria-live="assertive"\n          aria-atomic="true"\n          >Type 2 or more characters for results.</span\n        >\n      </div>\n      <span\n        class="visually-hidden"\n        aria-atomic="true"\n        aria-live="assertive"\n        role="status"\n        >Type 2 or more characters for results.</span\n      >\n    </div>\n    <button class="btn btn-primary" type="submit">${t}</button>\n    <div class="invalid-feedback">\n      Please enter a county or zip code in California.\n    </div>\n  </div>\n  </form>`}(s,i);this.innerHTML=a;const l="input[data-multiple]";let r=this;const o={autoFirst:!0,listLabel:n,filter:function(e,s){return t.FILTER_CONTAINS(e,s.match(/[^,]*$/)[0])},item:function(e,s){return document.querySelector(".invalid-feedback").style.display="none",document.querySelector(".city-search").classList.remove("is-invalid"),t.ITEM(e,s.match(/[^,]*$/)[0])},replace:function(e){let t=this.input.value.match(/^.+,\s*|/)[0]+e;this.input.value=t,r.dispatchEvent(new CustomEvent("showResults",{detail:t}))}},c=new t(l,o);document.querySelector(l).addEventListener("keyup",(t=>{const s=[13,9,27,38,40];if(t.target.value.length>=2&&-1===s.indexOf(t.keyCode)){let s=t.target.value;window.lookup=s;const i=`${e}${s}`;window.fetch(i).then((e=>e.json())).then((e=>{c.list=e.match.map((e=>e))})).catch((()=>{}))}})),document.querySelector(".js-cagov-lookup").addEventListener("submit",(e=>{e.preventDefault(),document.querySelector(".invalid-feedback").style.display="none",document.querySelector(".city-search").classList.remove("is-invalid");let t=this.querySelector("input").value;this.dispatchEvent(new CustomEvent("showResults",{detail:t}))}))}}function i(e,t,s){-1===e.toLowerCase().indexOf("county")&&(e+=" County");let i=`Showing telehealth services or nurse advice lines offered by health plans in ${e}.`;s&&(i=`${t} is in ${e}, showing telehealth services or nurse advice lines offered by health plans in ${e}.`),window.fetch("https://api.alpha.ca.gov/TeleHealth/"+e.replace(" County","")).then((e=>e.json())).then((e=>{let t=`\n      <h3>${i}</h3>\n      <div class="pt-5 js-provider-list">\n        ${e.sort((function(e,t){return e["Health Plan Name"]<t["Health Plan Name"]?-1:e["Health Plan Name"]>t["Health Plan Name"]?1:0})).map((e=>`\n            <div class="card">\n              <div class="card-header card-header-multi">\n                <span class="bold">${e["Health Plan Name"]}</span>\n                <span class="">${e["Plan Type"].toLowerCase().indexOf("medi-cal")>-1?e["Plan Type"]:""}</span>\n              </div>\n              <div class="card-body">\n                <div class="card-text">\n                  <p>Telehealth care offered: ${"Yes"==e["Telehealth Offered by Health Plan"]?'<span class="bold">Yes</span>':'<span class="bold">No</span>'}\n\n                  ${""!=e["Telehealth Services Phone Number"]?`<p>Telehealth services phone number: <a href="tel:${e["Telehealth Services Phone Number"]}">${e["Telehealth Services Phone Number"]}</a></p>`:""}   \n\n                  <p>Health plan nurse advice line: \n                    ${""==e["Health Plan Nurse Advice Line"]||e["Health Plan Nurse Advice Line"].match(/[A-Za-z]/)?"See insurance card":`<a href="${e["Health Plan Nurse Advice Line"]}">${e["Health Plan Nurse Advice Line"]}</a>`}\n                  </p>\n                  \n                  ${""!=e["Special Note"]?`<p>${e["Special Note"]}</p>`:""}\n\n                  ${""!=e["Visit Health Plan Website"]?`<p><a href="${e["Visit Health Plan Website"]}" class="action-link mr-3">Visit Health Plan website</a></p>`:""}\n                  \n                  ${""!=e["Visit Telehealth Website"]?`<p><a href="${e["Visit Telehealth Website"]}" class="action-link mr-3">Visit Telehealth website</a></p>`:""}\n                </div>\n              </div>\n            </div>\n          `)).join(" ")}\n      </div>\n    `;document.querySelector(".js-telehealth-providers").innerHTML=t})).catch((e=>{n()}))}function n(){document.querySelector(".invalid-feedback").style.display="block"}window.customElements.define("cwds-lookup",s),document.querySelector("cwds-lookup")&&document.querySelector("cwds-lookup").addEventListener("showResults",(e=>{!function(e){let t=!1;if(e.match(/^\d+$/)){t=!0;let s=`https://api.alpha.ca.gov/countyfromzip/${e}`;window.fetch(s).then((e=>e.json())).then((s=>{i(s[0].county,e,t)})).catch((()=>{n()}))}else i(e,e,t)}(e.detail)}));
