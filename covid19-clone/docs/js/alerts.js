class e{constructor(e){let t={label:"Unknown data",value:"Unknown data"};"string"==typeof e?t={label:e,value:e}:Array.isArray(e)?t={label:e[0],value:e[1]}:"object"==typeof e&&("label"in e||"value"in e)&&(t=e),this.label=t.label||t.value,this.value=t.value,"userData"in t&&(this.userData=t.userData)}get length(){return this.label.length}toString(){return`${this.label}`}valueOf(){return this.toString()}}class t{constructor(e,s){t.all=[];const n=this;t.count=(t.count||0)+1,this.count=t.count,this.isOpened=!1,this.input=t.query(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-owns",`awesomplete_list_${this.count}`),this.input.setAttribute("role","combobox"),this.options=s||{},this.configure({minChars:2,maxItems:10,autoFirst:!1,data:t.DATA,filter:t.FILTER_CONTAINS,sort:!1!==s.sort&&t.SORT_BYLENGTH,container:t.CONTAINER,item:t.ITEM,replace:t.REPLACE,tabSelect:!1},s),this.index=-1,this.container=this.container(e),this.ul=t.create("ul",{hidden:"hidden",role:"listbox",id:`awesomplete_list_${this.count}`,inside:this.container}),this.status=t.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!==this.minChars?`Type ${this.minChars} or more characters for results.`:"Begin typing for results."}),this.events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown(e){const t=e.keyCode;n.opened&&(13===t&&n.selected?(e.preventDefault(),e.stopImmediatePropagation(),n.select()):9===t&&n.selected&&n.tabSelect?n.select():27===t?n.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),n[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown(e){e.preventDefault()},click(e){let t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),n.select(t,e.target))}}}},t.bind(this.input,this.events.input),t.bind(this.input.form,this.events.form),t.bind(this.ul,this.events.ul),this.input.hasAttribute("list")?(this.list=`#${this.input.getAttribute("list")}`,this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||s.list||[],t.all.push(this)}configure(e,t){Object.keys(e).forEach((s=>{const n=e[s],i=this.input.getAttribute(`data-${s.toLowerCase()}`);this[s]="number"==typeof n?parseInt(i,10):!1===n?null!==i:n instanceof Function?null:i,this[s]||0===this[s]||(this[s]=s in t?t[s]:n)}))}set list(e){if(Array.isArray(e))this.dataList=e;else if("string"==typeof e&&e.indexOf(",")>-1)this.dataList=e.split(/\s*,\s*/);else{const s=t.query(e);if(s&&s.children){const e=[],t=t=>{if(!t.disabled){const s=t.textContent.trim(),n=t.value||s,i=t.label||s;""!==n&&e.push({label:i,value:n})}};Array.prototype.slice.apply(s.children).forEach(t),this.dataList=e}}document.activeElement===this.input&&this.evaluate()}get list(){return this.dataList}get selected(){return this.index>-1}get opened(){return this.isOpened}close(e){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),t.fire(this.input,"awesomplete-close",e||{}))}open(){this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),t.fire(this.input,"awesomplete-open")}destroy(){if(t.unbind(this.input,this.events.input),t.unbind(this.input.form,this.events.form),!this.options.container){const{parentNode:e}=this.container;e.insertBefore(this.input,this.container),e.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");const e=t.all.indexOf(this);-1!==e&&t.all.splice(e,1)}next(){const e=this.ul.children.length;let t=0;t=this.index<e-1?this.index+1:e?0:-1,this.goto(t)}previous(){const e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)}goto(e){const s=this.ul.children;if(this.selected&&s[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&s.length>0){s[e].setAttribute("aria-selected","true"),this.status.textContent=`${s[e].textContent}, list item ${e+1} of ${s.length}`,this.input.setAttribute("aria-activedescendant",`${this.ul.id}_item_${this.index}`),this.ul.scrollTop=s[e].offsetTop-this.ul.clientHeight+s[e].clientHeight;const n=this.suggestions[this.index];t.fire(this.input,"awesomplete-highlight",{selectedIndex:this.index,selectedText:`${n}`,selectedSuggestion:n})}}select(e,s){let n=e;if(e?this.index=t.siblingIndex(e):n=this.ul.children[this.index],n){const e=this.index,i=this.suggestions[e];t.fire(this.input,"awesomplete-select",{selectedIndex:e,selectedText:`${i}`,selectedSuggestion:i,origin:s||n})&&(this.replace(i),this.close({reason:"select"}),t.fire(this.input,"awesomplete-selectcomplete",{selectedIndex:e,selectedText:`${i}`,selectedSuggestion:i}))}}evaluate(){const t=this,{value:s}=this.input;if(s.length>=this.minChars&&this.dataList&&this.dataList.length>0){this.index=-1,this.ul.innerHTML="";const n=n=>new e(t.data(n,s)),i=e=>t.filter(e,s);this.suggestions=this.dataList.map(n).filter(i),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems);const r=(e,n)=>{t.ul.appendChild(t.item(e,s,n))};this.suggestions.forEach(r),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=`${this.ul.children.length} results found`)}else this.close({reason:"nomatches"}),this.status.textContent="No results found"}static FILTER_CONTAINS(e,s){return RegExp(t.regExpEscape(s.trim()),"i").test(e)}static FILTER_STARTSWITH(e,s){return RegExp(`^${t.regExpEscape(s.trim())}`,"i").test(e)}static SORT_BYLENGTH(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1}static CONTAINER(e){return t.create("div",{className:"awesomplete",around:e})}static ITEM(e,s,n){const i=""===s.trim()?e:`${e}`.replace(RegExp(t.regExpEscape(s.trim()),"gi"),"<mark>$&</mark>");return t.create("li",{innerHTML:i,"aria-selected":"false",id:`awesomplete_list_${this.count}_item_${n}`})}static REPLACE(e){this.input.value=e.value||e.label}static DATA(e){return e}static query(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}static queryAll(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}static create(e,s){const n=document.createElement(e);return Object.keys(s).forEach((e=>{const i=s[e];if("inside"===e)t.query(i).appendChild(n);else if("around"===e){const e=t.query(i);e.parentNode.insertBefore(n,e),n.appendChild(e),null!=e.getAttribute("autofocus")&&e.focus()}else e in n?n[e]=i:n.setAttribute(e,i)})),n}static bind(e,t){if(e){const s=s=>{const n=t[s];s.split(/\s+/).forEach((t=>{e.addEventListener(t,n)}))};Object.keys(t).forEach(s)}}static unbind(e,t){if(e){const s=s=>{const n=t[s];s.split(/\s+/).forEach((t=>{e.removeEventListener(t,n)}))};Object.keys(t).forEach(s)}}static fire(e,t,s){const n=document.createEvent("HTMLEvents"),i=e=>{n[e]=s[e]};return n.initEvent(t,!0,!0),"object"==typeof s&&Object.keys(s).forEach(i),e.dispatchEvent(n)}static regExpEscape(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}static siblingIndex(e){let t=0,s=e;for(;s;)s=s.previousElementSibling,s&&(t+=1);return t}}function s(e,t){let s=!1;if(e.match(/^\d+$/)){s=!0;let a=`https://api.alpha.ca.gov/countyfromzip/${e}`;window.fetch(a).then((e=>e.json())).then((a=>{Array.isArray(a)?function(e,t,s,n){let a=[];if(n.forEach((t=>{e.forEach((e=>{t.name.toLowerCase()===e.county.toLowerCase()&&a.push(t)}))})),0===a.length)r();else{let e="";a.forEach((n=>{let r=n.name,a=n.url;e+=i(t,s,r,a)})),document.querySelector(".js-county-alert").innerHTML=e}}(a,e,s,t):n(a.county,e,s,t)})).catch((e=>{r()}))}else n(e,e,s,t)}function n(e,t,s,n){let a;if(n.forEach((t=>{t.name.toLowerCase()===e.toLowerCase()&&(a=t)})),a){const e=a.name,n=a.url;document.querySelector(".js-county-alert").innerHTML=i(t,s,e,n)}else r()}function i(e,t,s,n){return`<li class="card mb-20  border-0">\n  <h2>Alerts for ${e}</h2>\n  ${t?`<p>Your zip code, ${e}, is in ${s.toLowerCase().indexOf("county")>-1?s:s+" County"}.</p>`:""}\n    <div class="card-body">\n      <a class="action-link" href="${n}">\n        Sign up for ${s.toLowerCase().indexOf("county")>-1?s:s+" County"} alerts\n      </a>\n    </div>\n  </li>`}function r(){document.querySelector(".invalid-feedback").style.display="block"}if(document.querySelector(".js-alert-lookup")){const e=[{name:"Modoc",url:"https://public.coderedweb.com/CNE/en-US/BFB9C8502454"},{name:"Siskiyou",url:"https://www.co.siskiyou.ca.us/emergencyservices/page/codered-emergency-alert-system"},{name:"Del Norte",url:"http://www.co.del-norte.ca.us/news/delnortecommunityalertsystem"},{name:"Humboldt",url:"https://humboldtgov.org/2014/Emergency-Notifications"},{name:"Trinity",url:"https://www.trinitycounty.org/oes/codered"},{name:"Shasta",url:"https://public.coderedweb.com/CNE/en-US/BFBDCA5E730B"},{name:"Lassen",url:"https://public.coderedweb.com/CNE/en-US/BFB7CC4C6C0A"},{name:"Mendocino",url:"https://www.mendocinocounty.org/MendoAlert"},{name:"Tehama",url:"https://member.everbridge.net/index/892807736723620#/signup"},{name:"Plumas",url:"https://www.plumascounty.us/2163/CodeRed-Emergency-Alert-System"},{name:"Lake",url:"http://www.lakesheriff.com/About/OES/LakeCoAlerts.htm"},{name:"Colusa",url:"https://www.countyofcolusa.org/index.aspx?NID=64"},{name:"Glenn",url:"https://www.smart911.com/"},{name:"Butte",url:"https://public.coderedweb.com/CNE/en-US/BFA19C579EA5"},{name:"Yuba",url:"https://public.coderedweb.com/CNE/en-US/FBE5B4D6F361"},{name:"Sierra",url:"http://www.sierracounty.ca.gov/224/CodeRED"},{name:"Nevada",url:"https://public.coderedweb.com/CNE/en-US/CA8B57E20D17"},{name:"Alameda",url:"http://www.acgov.org/emergencysite/"},{name:"Alpine",url:"https://douglascounty.onthealert.com/"},{name:"Amador",url:"https://www.amadorgov.org/departments/office-of-emergency-services/"},{name:"Contra Costa",url:"https://Cwsalerts.com"},{name:"Fresno",url:"https://member.everbridge.net/index/453003085614497#/login"},{name:"Los Angeles",url:"https://www.lacounty.gov/emergency/alert-la/"},{name:"Merced",url:"https://member.everbridge.net/index/1332612387831920#/login"},{name:"San Mateo",url:"https://member.everbridge.net/index/892807736723485#/login"},{name:"Santa Clara",url:"https://www.sccgov.org/sites/oes/about-us/pages/about_oes.aspx"},{name:"Mono",url:"https://public.coderedweb.com/CNE/en-US/09531DC35832"},{name:"Napa",url:"https://local.nixle.com/city/ca/napa/"},{name:"Orange",url:"https://member.everbridge.net/index/453003085613900#/login"},{name:"San Benito",url:"https://public.coderedweb.com/CNE/en-US/218A80E36F49"},{name:"San Diego",url:"https://www.sandiegocounty.gov/coronavirus.html"},{name:"San Luis Obispo",url:"https://www.prepareslo.org/en/alert-and-notification-systems.aspx"},{name:"Santa Barbara",url:"https://member.everbridge.net/index/892807736723794#/signup"},{name:"Sonoma",url:"http://sonomacounty.ca.gov/FES/Emergency-Management/SoCoAlert/"},{name:"Sutter",url:"http://public.coderedweb.com/cne/en-US/bf0634786D76"},{name:"Tulare",url:"https://oes.tularecounty.ca.gov/oes/index.cfm/preparedness/be-informed/stay-informed/"},{name:"Yolo",url:"http://www.yolo-alert.org/"},{name:"Madera",url:"https://member.everbridge.net/index/892807736729447#/login"},{name:"Calaveras",url:"http://oes.calaverasgov.us/Notifications"},{name:"Mariposa",url:"https://member.everbridge.net/index/892807736729447#/login"},{name:"Solano",url:"http://www.alertsolano.com"},{name:"Inyo",url:"https://public.coderedweb.com/CNE/en-US/DAD807D480BF"},{name:"Monterey",url:"https://member.everbridge.net/index/453003085611217#/login"},{name:"Stanislaus",url:"http://stanaware.com/"},{name:"Marin",url:"https://www.marinsheriff.org/services/emergency-services/alert-marin"},{name:"San Joaquin",url:"https://nixle.com/county/ca/san-joaquin/municipal/"},{name:"Kings",url:"https://www.countyofkings.com/departments/emergency-preparedness"},{name:"San Francisco",url:"https://member.everbridge.net/index/453003085612609#/login"},{name:"Imperial",url:"https://imperialcotens.onthealert.com/Terms/Index/?ReturnUrl=%2f"},{name:"Placer",url:"https://www.placer-alert.org"},{name:"Tuolumne",url:"https://www.tuolumnecounty.ca.gov/AlertCenter.aspx"},{name:"Ventura",url:"https://vcemergency.com"},{name:"Santa Cruz",url:"https://public.coderedweb.com/CNE/en-US/218A80E36F49"},{name:"Kern",url:"http://www.kerncountyfire.org/education/ready-kern.html"},{name:"San Bernardino",url:"https://www.sbcounty.gov/SBCFire/TENS/TENSContact.aspx"},{name:"El Dorado",url:"http://ready.edso.org/"},{name:"Sacramento",url:"http://www.sacramentoready.org/Pages/Emergency-Alerts-Notification-System.aspx"},{name:"Riverside",url:"https://countyofriverside.us/Residents/Emergencies/AlertRivCo.aspx"}],n="input[data-multiple]",i={autoFirst:!0,filter:function(e,s){return t.FILTER_CONTAINS(e,s.match(/[^,]*$/)[0])},item:function(e,s){return document.querySelector(".invalid-feedback").style.display="none",document.querySelector(".city-search").classList.remove("is-invalid"),t.ITEM(e,s.match(/[^,]*$/)[0])},replace:function(t){let n=this.input.value.match(/^.+,\s*|/)[0]+t;this.input.value=n,s(n,e)}},r=new t(n,i);document.querySelector(n).addEventListener("keyup",(e=>{const t=[13,9,27,38,40];e.target.value.length>=2&&-1===t.indexOf(e.keyCode)&&function(e,t){window.lookup=e;const s=`https://api.alpha.ca.gov/CaZipCityCountyTypeAhead?citymode=false&countymode=true&q=${e}`;window.fetch(s).then((e=>e.json())).then((e=>{t.list=e.match.map((e=>e))})).catch((()=>{}))}(e.target.value,r)})),document.querySelector(".js-alert-lookup").addEventListener("submit",(function(t){t.preventDefault(),document.querySelector(".invalid-feedback").style.display="none",document.querySelector(".city-search").classList.remove("is-invalid"),s(this.querySelector("input").value,e)}))}
